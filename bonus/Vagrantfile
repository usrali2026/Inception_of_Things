Vagrant.configure("2") do |config|
  # Libvirt-compatible Ubuntu 22.04 box
  config.vm.box = "generic/ubuntu2204"

  config.vm.define "bonus-vm" do |vm|
    vm.vm.hostname = "bonus-vm"

    # Private network so you can reach services if needed
    vm.vm.network "private_network", ip: "192.168.56.150"

    # Sync this bonus folder into /vagrant/bonus inside the VM
    vm.vm.synced_folder ".", "/vagrant/bonus"

    # Resources: tune according to what your host + outer VM can handle
    vm.vm.provider :libvirt do |lv|
      lv.cpus = 4        # you can lower to 2 if needed
      lv.memory = 8192   # 8GB; try 6144 if 8GB is too much
    end

    # Light bootstrap: update apt only
    vm.vm.provision "shell", inline: <<-SHELL
      set -e
      echo "[bonus-vm] apt-get update"
      sudo apt-get update -y
      echo "[bonus-vm] Ready. Run scripts from /vagrant/bonus/scripts"
    SHELL
  end
end
