# P2 - K3s and three simple applications

Vagrant.configure("2") do |config|
  # Libvirt-capable Ubuntu 22.04 box
  config.vm.box = "generic/ubuntu2204"
  config.ssh.insert_key = false

  config.vm.define "alrahmouS" do |srv|
    srv.vm.hostname = "alrahmouS"
    srv.vm.network "private_network", ip: "192.168.56.110"

    srv.vm.provider :libvirt do |v|
      v.cpus   = 1
      v.memory = 1024
    end

    srv.vm.provision "shell",
      path: "scripts/install_k3s.sh",
      env: {
        "SERVER_IP" => "192.168.56.110"
      }
  end
end
